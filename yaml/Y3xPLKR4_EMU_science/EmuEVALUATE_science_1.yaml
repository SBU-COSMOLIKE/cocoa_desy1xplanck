### Science Run 1 (Emulator)
### Motivation:
###     science run stales, run with emulator to see if anything wrong
###     - data vector: data vector v3 (include SOMPZ v0.50 file)
###     - scale cut: mask34
###     - number of Qs marginalized: 1
###     - Q prior: info
### -----------------------------------------------------------------
### cosmology: baseline (omegam, As, ns, omegab, H0, mnu)
### survey footprint: include the extended annulus around DES Y3
### systematics: 
###     - baryon effects: the first one PC
###     - shear calibration bias: multiplicative, 
###     - photo-z uncertainty: shift + stretch
###     - galaxy bias: linear bias
###     - intrinsic alignment: NLA
### analysis choice: 
###     - shear-shear: mask34 + 1PC
###     - Extended footprint
###     - with cross-cov between Ckk bandpower and 5x2pt
###     - using Planck DR4 map
### external probes: None
### data vector: measurement from DES Y3 and Planck PR4

timing: True
debug: False
stop_at_error: False

likelihood:
  desy1xplanck.desy3xplanck_cosmic_shear_emu:
    path: ./external_modules/data/desy1xplanck
    data_file: datasets/Y3xPlanckPR4_mask34_real.dataset_test
    train_config: ./projects/desy1xplanck/emulator_deprecated/train_emu_full_resnet.yaml

params:
  As_1e9:
    prior:
      min: 0.5
      max: 5
    ref:
      dist: norm
      loc: 2.1
      scale: 0.65
    proposal: 0.4
    latex: 10^9 A_\mathrm{s}
  ns:
    prior:
      min: 0.87
      max: 1.07
    ref:
      dist: norm
      loc: 0.96605
      scale: 0.01
    proposal: 0.01
    latex: n_\mathrm{s}
  H0:
    prior:
      min: 55
      max: 91
    ref:
      dist: norm
      loc: 67.32
      scale: 5
    proposal: 3
    latex: H_0
  omegab:
    prior:
      min: 0.03
      max: 0.07
    ref:
      dist: norm
      loc: 0.04
      scale: 0.004
    proposal: 0.004
    latex: \Omega_\mathrm{b}
  omegam:
    prior:
      min: 0.1
      max: 0.9
    ref:
      dist: norm
      loc: 0.3
      scale: 0.02
    proposal: 0.02
    latex: \Omega_\mathrm{m}
  mnu:
    prior:
      min: 0.0558
      max: 0.12
    ref:
      dist: norm
      loc: 0.06
      scale: 0.01
    proposal: 0.01
    latex: \m_\\nu
  # ------------------------------------------------------------------
  # ------------- Derived Parameters ---------------------------------
  # ------------------------------------------------------------------
  sigma8:
    latex: \sigma_8
  # ------------------------------------------------------------------
  # DES-Y3 3x2 nuissance parameter begins
  # ------------------------------------------------------------------
  # baryon effects: the first two PCs
  # Q1 informative: [-0.03, 0.16]
  # Q1 wide: [-20, 20]
  # =================================
  DES_BARYON_Q1:
    prior:
      min: -0.0
      max: 0.1
    ref:
      dist: norm
      loc: 0.05
      scale: 0.01
    proposal: 0.01
    latex: Q_\mathrm{DES}^1
  # ------------------------------------------------------------------
  # DES-Y3 3x2 nuissance parameter ends
  # ------------------------------------------------------------------
prior:
  bbn_consistency: "lambda omegab, H0: 1.45 if 0.005<=omegab*(H0/100)**2<=0.04 else -np.inf"
sampler:
  evaluate:
    N: 1
    override:
#      As_1e9: 2.1
      As_1e9: 1.11
      #sigma8: 0.827706
      ns: 0.96605
      H0: 67.32
      omegab: 0.04
#      omegam: 0.3
      omegam: 0.372
      mnu: 0.06
      DES_DZ_S1: 0.0
      DES_DZ_S2: 0.0
      DES_DZ_S3: 0.0
      DES_DZ_S4: 0.0
      DES_M1: -0.0063
      DES_M2: -0.0198
      DES_M3: -0.0241
      DES_M4: -0.0369
#      DES_M1: -0.006
#      DES_M2: -0.020
#      DES_M3: -0.024
#      DES_M4: -0.037
      DES_A1_1: -0.7
      DES_A1_2: -1.7
#      DES_A2_1: -1.36
#      DES_A2_2: -2.5
#      DES_BTA_1: 1.0
#      DES_A1_1: 0.0
#      DES_A1_2: 0.0
#      DES_A2_1: 0.0
#      DES_A2_2: 0.0
#      DES_BTA_1: 0.0
#      DES_DZ_L1: -0.009
#      DES_DZ_L2: -0.035
#      DES_DZ_L3: -0.005
#      DES_DZ_L4: -0.007
#      DES_DZ_L5: 0.002
#      DES_DZ_L6: 0.002
#      DES_DZ_L1: 0.0
#      DES_DZ_L2: 0.0
#      DES_DZ_L3: 0.0
#      DES_DZ_L4: 0.0
#      DES_DZ_L5: 0.0
#      DES_DZ_L6: 0.0
#      DES_B1_1: 1.5
#      DES_B1_2: 1.8
#      DES_B1_3: 1.8
#      DES_B1_4: 1.9
#      DES_B1_1: 1.49
#      DES_B1_2: 1.69
#      DES_B1_3: 1.91
#      DES_B1_4: 1.79
#      DES_B1_5: 2.3
#      DES_B1_6: 2.3
#      DES_STRETCH_L1: 0.975
#      DES_STRETCH_L2: 1.306
#      DES_STRETCH_L3: 0.870
#      DES_STRETCH_L4: 0.918
#      DES_STRETCH_L5: 1.080
#      DES_STRETCH_L6: 0.845
#      DES_STRETCH_L1: 1.0
#      DES_STRETCH_L2: 1.0
#      DES_STRETCH_L3: 1.0
#      DES_STRETCH_L4: 1.0
#      DES_STRETCH_L5: 1.0
#      DES_STRETCH_L6: 1.0
#      DES_PM1: 0.0
#      DES_PM2: 0.0
#      DES_PM3: 0.0
#      DES_PM4: 0.0
#      DES_PM5: 0.0
#      DES_PM6: 0.0
      DES_BARYON_Q1: 0.0
#      DES_BARYON_Q2: 0.0

output: ./projects/desy1xplanck/chains/validation/EmuEVALUATE1
